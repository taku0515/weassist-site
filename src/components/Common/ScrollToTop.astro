<button
  id="scroll-to-top"
  aria-label="トップへ戻る"
  class="fixed bottom-8 right-8 z-40 p-4 bg-blue-800 text-white rounded-full shadow-lg cursor-pointer opacity-0 translate-y-10 transition-all duration-300 hover:bg-blue-600 hover:shadow-xl hover:-translate-y-1 pointer-events-none"
>
  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
  </svg>
</button>

<script>
  document.addEventListener('astro:page-load', () => {
    const scrollBtn = document.getElementById('scroll-to-top');

    const toggleVisibility = () => {
      if (window.scrollY > 300) {
        // 300px以上スクロールしたら表示
        scrollBtn?.classList.remove('opacity-0', 'translate-y-10', 'pointer-events-none');
      } else {
        // それ以外は隠す
        scrollBtn?.classList.add('opacity-0', 'translate-y-10', 'pointer-events-none');
      }
    };

    const scrollToTop = () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth' // スムーズにスクロール
      });
    };

    window.addEventListener('scroll', toggleVisibility);
    scrollBtn?.addEventListener('click', scrollToTop);
  });
</script>